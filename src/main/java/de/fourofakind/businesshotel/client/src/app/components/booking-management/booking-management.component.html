<div>
  <h1>Buchungsverwaltung</h1>
    <mat-tab-group>
      <mat-tab label="Hinzufügen">
        <div class="addTab">
          <br>
          <mat-radio-group [(ngModel)]="bookingType" (change)="getValidRooms()" class="bookingtypeSelector">
            <mat-radio-button required value="hotelRoom">Hotelzimmer</mat-radio-button><br>
            <mat-radio-button required value="conferenceRoom" >Konferenzraum</mat-radio-button>
          </mat-radio-group>
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Kundennummer</mat-label>
            <input matInput type="number" min="1" name="customerID" [(ngModel)]="customerID" required>
          </mat-form-field>
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Raumnummer</mat-label>
            <mat-select  [(ngModel)]="roomNo" required>
              <mat-option *ngFor="let room of rooms"  value="{{room.roomNo}}">{{room.roomNo}}</mat-option>
              <mat-option  *ngIf="!rooms" value="" disabled>Keine Räume verfügbar oder keine Kategorie gewählt</mat-option>
            </mat-select>
          </mat-form-field>
          <br>
          <div>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Startdatum</mat-label>
              <input matInput type="date" min="{{minDateStart}}" [(ngModel)]="startDate" required>
            </mat-form-field>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Startzeit</mat-label>
              <input matInput type="time" [(ngModel)]="startTime" required>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Enddatum</mat-label>
              <input matInput type="date" min="{{minDateEnd}}" [(ngModel)]="endDate" required>
            </mat-form-field>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Endzeit</mat-label>
              <input matInput type="time" [(ngModel)]="endTime" required>
            </mat-form-field>
          </div>
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Kundenwünsche</mat-label>
            <textarea matInput type="text" [(ngModel)]="specialWishes"></textarea>
          </mat-form-field>
          <button mat-raised-button color="primary" type="submit" (click)="addOrUpdateBooking(true)">Absenden</button>
        </div>
      </mat-tab>







      <mat-tab label="Bearbeiten">
        <div class="addTab">
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Buchungsnummer</mat-label>
            <input matInput type="number" min="1" [(ngModel)]="bookingNo" required>
          </mat-form-field>
          <button mat-raised-button color="primary" (click)="loadBookingInfoToFormular()">Suchen</button> <!-- sollte Voraussetzung werden für die Aktivierung des restlicehn Formulars-->
          <br>
          <mat-radio-group [(ngModel)]="bookingType" (change)="getValidRooms()" class="bookingtypeSelector">
            <mat-radio-button required value="hotelRoom" [checked]="bookingType=='hotelRoom'">Hotelzimmer</mat-radio-button><br>
            <mat-radio-button required value="conferenceRoom" [checked]="bookingType=='conferenceRoom'">Konferenzraum</mat-radio-button>
          </mat-radio-group>
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Kundennummer</mat-label>
            <input matInput type="number" min="1" name="customerID" [(ngModel)]="customerID" value="{{customerID}}" required>
          </mat-form-field>
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Raumnummer</mat-label>
            <mat-select  required [(ngModel)]="roomNo" value="{{roomNo}}">
              <mat-option *ngFor="let room of rooms" value="{{room.roomNo}}">{{room.roomNo}}</mat-option>
              <mat-option *ngIf="!rooms" value="" disabled>Keine Räume verfügbar oder keine Kategorie gewählt</mat-option>
            </mat-select>
          </mat-form-field>
          <br>
          <div>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Startdatum</mat-label>
              <input matInput type="date" [(ngModel)]="startDate" value="{{startDate}}" required>
            </mat-form-field>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Startzeit</mat-label>
              <input matInput type="time" [(ngModel)]="startTime" value="{{startTime}}" required>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Enddatum</mat-label>
              <input matInput type="date" [(ngModel)]="endDate" value="{{endDate}}" required>
            </mat-form-field>
            <mat-form-field class="halfInput" appearance="fill">
              <mat-label>Endzeit</mat-label>
              <input matInput type="time" [(ngModel)]="endTime" value="{{endTime}}" required>
            </mat-form-field>
          </div>
          <br>
          <mat-form-field appearance="fill">
            <mat-label>Kundenwünsche</mat-label>
            <textarea matInput type="text" [(ngModel)]="specialWishes" value="{{specialWishes}}"></textarea>
          </mat-form-field>
          <button mat-raised-button color="primary" type="submit" (click)="addOrUpdateBooking(false)">Absenden</button>
        </div>
      </mat-tab>







      <mat-tab label="Löschen">
        <br>

        <br>
        <mat-form-field appearance="fill">
          <mat-label>Buchungsnummer</mat-label>
          <input matInput type="number" [(ngModel)]="bookingNo" required>
        </mat-form-field>
        <button mat-raised-button color="primary" type="submit" (click)="submitSearch()">Suchen</button>
        <br>
        <mat-card *ngIf="!foundBooking">

          <mat-label>Buchungsnummer</mat-label>
          <mat-card-title>..</mat-card-title>
          <mat-label>Buchungsinformationen</mat-label>
          <mat-card-content class="halfInput">
            <table class="table table-bordered table-striped">
              <tr>
                <td>customerID</td>
                <td>..</td>
              </tr>
              <tr>
                <td>empNo</td>
                <td>..</td>
              </tr>
              <tr>
                <td>startDate</td>
                <td>..</td>
              </tr>
              <tr>
                <td>endDate</td>
                <td>..</td>
              </tr>
              <tr>
                <td>specialWishes</td>
                <td>..</td>
              </tr>
              <tr>
                <td>pricing</td>
                <td>..</td>
              </tr>
            </table>
          </mat-card-content>
        </mat-card>
        <mat-card *ngIf="foundBooking">

          <mat-label>Buchungsnummer</mat-label>
          <mat-card-title>{{foundBooking.bookingNo}}</mat-card-title>
          <mat-label>Buchungsinformationen</mat-label>
          <mat-card-content class="halfInput">
            <table class="table table-bordered table-striped">
              <tr>
                <td>customerID</td>
                <td>{{ foundBooking.customerID }}</td>
              </tr>
              <tr>
                <td>empNo</td>
                <td>{{ foundBooking.empNo }}</td>
              </tr>
              <tr>
                <td>startDate</td>
                <td>{{ foundBooking.startDate }}</td>
              </tr>
              <tr>
                <td>endDate</td>
                <td>{{ foundBooking.endDate }}</td>
              </tr>
              <tr>
                <td>specialWishes</td>
                <td>{{ foundBooking.specialWishes }}</td>
              </tr>
              <tr>
                <td>pricing</td>
                <td>{{ foundBooking.pricing }}</td>
              </tr>
            </table>
          </mat-card-content>
        </mat-card>
        <br>
          <mat-slide-toggle [(ngModel)]="isChecked" [disabled]="!foundBooking" >Freigeben</mat-slide-toggle> <!--Bestätigung zum Freigeben des Löschen, könnte auch als Pop-Up implementiert werden-->
          <button mat-raised-button color="primary" type="submit" [disabled]="!isChecked" (click)="deleteBooking()">Löschen</button>
      </mat-tab>





      <mat-tab label="Anzeigen">
        <br>
        <mat-form-field appearance="fill">
          <mat-label>Buchungsnummer</mat-label>
          <input matInput type="number" [(ngModel)]="bookingNo" required>
        </mat-form-field>
        <button mat-raised-button color="primary" type="submit" (click)="submitSearch()">Suchen</button>
        <mat-card *ngIf="foundBooking">
          <mat-label>Buchungsnummer</mat-label>
          <mat-card-title>{{foundBooking.bookingNo}}</mat-card-title>
          <mat-label>Buchungsinformationen</mat-label>
          <mat-card-content>
            <table class="table table-bordered table-striped">
              <tr>
                <td>customerID</td>
                <td>{{ foundBooking.customerID }}</td>
              </tr>
              <tr>
                <td>empNo</td>
                <td>{{ foundBooking.empNo }}</td>
              </tr>
              <tr>
                <td>startDate</td>
                <td>{{ foundBooking.startDate }}</td>
              </tr>
              <tr>
                <td>endDate</td>
                <td>{{ foundBooking.endDate }}</td>
              </tr>
              <tr>
                <td>specialWishes</td>
                <td>{{ foundBooking.specialWishes }}</td>
              </tr>
              <tr>
                <td>pricing</td>
                <td>{{ foundBooking.pricing }}</td>
              </tr>
            </table>
          </mat-card-content>
        </mat-card>
        <mat-card>

        </mat-card>
      </mat-tab>
    </mat-tab-group>

</div>
